(this["webpackJsonpbloglist-frontend"]=this["webpackJsonpbloglist-frontend"]||[]).push([[0],{65:function(e,t,a){e.exports=a.p+"static/media/holder.ee861f39.svg"},67:function(e,t,a){e.exports=a(97)},96:function(e,t,a){},97:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(24),l=a.n(c),o=a(7),u=a(9),s=a(23),i=a(55),m=a(56),p=a(5),d=a.n(p),f=a(6),E=a(14),v=a.n(E),g="/api/blogs/",h=null,b=function(){var e=Object(f.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.get(g);case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),y=function(){var e=Object(f.a)(d.a.mark((function e(t){var a,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={headers:{Authorization:h}},console.log("newObject",t),e.next=4,v.a.post(g,t,a);case 4:return n=e.sent,console.log(n.data),e.abrupt("return",n.data);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),w=function(){var e=Object(f.a)(d.a.mark((function e(t,a){var n,r,c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={headers:{Authorization:h}},r="".concat(g).concat(t),e.next=4,v.a.put(r,a,n);case 4:return c=e.sent,e.abrupt("return",c.data);case 6:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),x=function(){var e=Object(f.a)(d.a.mark((function e(t,a){var n,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat(g).concat(t,"/comments"),e.next=3,v.a.put(n,{text:a});case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),O={getAll:b,create:y,setToken:function(e){return h="Bearer ".concat(e)},update:w,remove:function(){var e=Object(f.a)(d.a.mark((function e(t){var a,n,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={headers:{Authorization:h}},n="".concat(g).concat(t),e.next=4,v.a.delete(n,a);case 4:return r=e.sent,e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),updateComments:x},k=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return e?function(t){t({type:"MESSAGE",data:e})}:function(t){t({type:"NO-MESSAGE",data:e})}},T=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{message:null,messageType:"no-message"},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"NO-MESSAGE":return{message:null,messageType:"no-message"};case"MESSAGE":return t.data;default:return e}},j=function(e,t,a){return function(){var n=Object(f.a)(d.a.mark((function n(r){var c,l;return d.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,O.create(e);case 3:c=n.sent,l=t.concat(c),r({type:"NEW",data:l}),r(k({message:"a new blog ".concat(e.title," by ").concat(a.name," added"),messageType:"success"})),setTimeout((function(){r(k())}),5e3),n.next=14;break;case 10:n.prev=10,n.t0=n.catch(0),r(k({message:n.t0.response.data.error,messageType:"danger"})),setTimeout((function(){r(k())}),5e3);case 14:case"end":return n.stop()}}),n,null,[[0,10]])})));return function(e){return n.apply(this,arguments)}}()},N=function(e,t){return function(){var a=Object(f.a)(d.a.mark((function a(n){var r;return d.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(!window.confirm("Remove blog ".concat(e.title))){a.next=14;break}return a.prev=1,a.next=4,O.remove(e.id);case 4:n(k({message:"".concat(e.title," has been deleted"),messageType:"danger"})),setTimeout((function(){n(k())}),5e3),r=t.filter((function(t){return t.id!==e.id})),n({type:"DELETE",data:r}),a.next=14;break;case 10:a.prev=10,a.t0=a.catch(1),n(k({message:a.t0.response.data.error,messageType:"danger"})),setTimeout((function(){n(k())}),5e3);case 14:case"end":return a.stop()}}),a,null,[[1,10]])})));return function(e){return a.apply(this,arguments)}}()},I=function(e,t,a){return function(){var n=Object(f.a)(d.a.mark((function n(r){var c,l;return d.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,O.update(e,t);case 3:return c=n.sent,n.next=6,a.map((function(e){return e.id===c.id&&(e.likes+=1),e}));case 6:l=n.sent,r({type:"UPDATE",data:l}),r(k({message:"Successfully updated ".concat(c.title),messageType:"success"})),setTimeout((function(){r(k())}),5e3),n.next=16;break;case 12:n.prev=12,n.t0=n.catch(0),r(k({message:n.t0.response.data.error,messageType:"danger"})),setTimeout((function(){r(k())}),5e3);case 16:case"end":return n.stop()}}),n,null,[[0,12]])})));return function(e){return n.apply(this,arguments)}}()},G=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"INITIAL":case"NEW":case"UPDATE":case"DELETE":return t.data;case"UNLOGGEDIN":return[];case"UPDATE-COMMENT":return t.data;default:return e}},S={login:function(){var e=Object(f.a)(d.a.mark((function e(t){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.post("/api/login/",t);case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},A=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"INIT":return null;case"LOGGEDIN":case"LOGIN":return t.data;case"LOGOUT":return null;default:return e}},C=null,B={getAll:function(){var e=Object(f.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.get("/api/users/");case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),create:function(){var e=Object(f.a)(d.a.mark((function e(t){var a,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={headers:{Authorization:C}},console.log("newObject",t),e.next=4,v.a.post("/api/users/",t,a);case 4:return n=e.sent,console.log(n.data),e.abrupt("return",n.data);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),setToken:function(e){return C="Bearer ".concat(e)},update:function(){var e=Object(f.a)(d.a.mark((function e(t,a){var n,r,c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={headers:{Authorization:C}},r="".concat("/api/users/").concat(t),e.next=4,v.a.put(r,a,n);case 4:return c=e.sent,e.abrupt("return",c.data);case 6:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),remove:function(){var e=Object(f.a)(d.a.mark((function e(t){var a,n,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={headers:{Authorization:C}},n="".concat("/api/users/").concat(t),e.next=4,v.a.delete(n,a);case 4:return r=e.sent,e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},L=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"NO_USERS":return null;case"GET_USERS":return t.data;default:return e}},U=Object(s.combineReducers)({blogs:G,user:A,notification:T,users:L}),M=Object(s.createStore)(U,Object(m.composeWithDevTools)(Object(s.applyMiddleware)(i.a))),D=a(21),R=a(108),P=a(109),W=a(104),z=a(99),F=a(100),H=function(){var e=Object(o.b)(),t=function(t){t.preventDefault();var a,n=t.target.username.value,r=t.target.password.value;e((a={username:n,password:r},function(){var e=Object(f.a)(d.a.mark((function e(t){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,S.login(a);case 3:n=e.sent,O.setToken(n.token),window.localStorage.setItem("loggedInBlogAppUser",JSON.stringify(n)),t({type:"LOGIN",data:n}),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),t(k({message:"Wrong credentials. Check the username or password",messageType:"danger"})),setTimeout((function(){t(k())}),5e3);case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}()))};return r.a.createElement(W.a,{onSubmit:function(e){return t(e)},className:"container",style:{height:"100%"}},r.a.createElement(W.a.Group,{controlId:"formGroupUsername"},r.a.createElement(W.a.Label,null,"Username"),r.a.createElement(W.a.Control,{type:"text",placeholder:"Enter username",name:"username"})),r.a.createElement(W.a.Group,{controlId:"formGroupPassword"},r.a.createElement(W.a.Label,null,"Password"),r.a.createElement(W.a.Control,{type:"password",placeholder:"Password",name:"password"})),r.a.createElement(W.a.Group,{as:z.a,controlId:"formGroupLoginBtn"},r.a.createElement(F.a,{type:"submit",variant:"primary",style:{width:"100%",margin:"auto"}}," ","Login in")))},J=function(){var e=Object(o.c)((function(e){return e.notification})),t=e.message,a=e.messageType;return r.a.createElement("div",{className:"container"},r.a.createElement(P.a,{style:{width:"70%",height:"100%",margin:"auto auto",marginTop:"10rem",minWidth:"250px",maxWidth:"400px"}},r.a.createElement(P.a.Header,{style:{textalign:"center",width:"100%"}},r.a.createElement("h3",null,"Login to application")),r.a.createElement(P.a.Body,null,r.a.createElement("div",{className:a},r.a.createElement("p",null,t)),r.a.createElement(H,null))))},K=a(101),q=function(){var e=Object(o.c)((function(e){return e.users}));return r.a.createElement("div",null,r.a.createElement(z.a,{className:"justify-content-md-center"},r.a.createElement("h2",null,"Users")),r.a.createElement(K.a,{striped:!0,bordered:!0,hover:!0},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"#"),r.a.createElement("th",null,"Users"),r.a.createElement("th",null,"Number of blogs Created"))),r.a.createElement("tbody",null,e.map((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t=t++,r.a.createElement("tr",{key:e.id},r.a.createElement("td",null,t),r.a.createElement("td",null,r.a.createElement(u.b,{to:"/users/".concat(e.id)},e.name)),r.a.createElement("td",null,e.blogs.length))})))))},_=a(102),Q=function(){var e=Object(o.c)((function(e){return e.users})),t=Object(D.f)().id,a=e.find((function(e){return e.id===t}));return a?r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement("h3",null,a.name),r.a.createElement("p",{className:"muted"},a.username)),r.a.createElement("h5",{className:"text-center"},"My blogs"),r.a.createElement("hr",null),r.a.createElement("ul",null," ",a.blogs.map((function(e){return r.a.createElement(P.a,{className:"text-center mb-2",key:e.id},r.a.createElement(P.a.Header,null,"Featured"),r.a.createElement(P.a.Body,null,r.a.createElement(P.a.Title,null,e.title),r.a.createElement(P.a.Text,null,"With supporting text below as a natural lead-in to additional content."),r.a.createElement(u.b,{to:"/blogs/".concat(e.id)},r.a.createElement(F.a,{variant:"primary"},"Go somewhere"))),r.a.createElement(P.a.Footer,{className:"text-muted"},"2 days ago"))})))):r.a.createElement("div",{style:{display:"flex",justifyContent:"center",alignItems:"center"}}," ",r.a.createElement(_.a,{animation:"border",role:"status"},r.a.createElement("span",{className:"sr-only"},"Loading...")))},V=a(8),X=a.n(V),Y=a(106),Z=a(66),$=function(e){var t=Object(n.useState)(""),a=Object(Z.a)(t,2),r=a[0],c=a[1];return{type:e,value:r,onChange:function(e){c(e.target.value)},onReset:function(){c("")}}},ee=function(e){var t=e.addBlog,a=$("text"),n=$("url");return r.a.createElement("div",null,r.a.createElement(Y.a,{defaultActiveKey:"0"},r.a.createElement(P.a,null,r.a.createElement(P.a.Header,null,r.a.createElement(Y.a.Toggle,{as:F.a,variant:"primary",eventKey:"1"},"Create")),r.a.createElement(Y.a.Collapse,{eventKey:"1"},r.a.createElement(P.a.Body,null,r.a.createElement(W.a,{onSubmit:function(e){e.preventDefault(),t({title:a.value,url:n.value}),a.onReset(),n.onReset()}},r.a.createElement(W.a.Group,{controlId:"formBasicTitle"},r.a.createElement(W.a.Label,null,"Blog Title"),r.a.createElement(W.a.Control,Object.assign({},a,{placeholder:"Enter blog title"}))),r.a.createElement(W.a.Group,{controlId:"formBasicUrl"},r.a.createElement(W.a.Label,null,"Blog Url"),r.a.createElement(W.a.Control,Object.assign({},n,{placeholder:"Url"}))),r.a.createElement(F.a,{variant:"primary",type:"submit",id:"createBtn"},"Create")," ",r.a.createElement(Y.a.Toggle,{as:F.a,variant:"danger",eventKey:"1"},"Cancel")))))))};ee.prototype={addBlog:X.a.func.isRequired};var te=ee,ae=function(e){var t=e.blog;return r.a.createElement(P.a,{className:"mb-2 mt-2"},r.a.createElement(P.a.Body,null,t.title),r.a.createElement(P.a.Footer,null,r.a.createElement(u.b,{to:"/blogs/".concat(t.id)}," Read more ..")))};ae.prototype={blog:X.a.object.isRequired};var ne=ae,re=function(e){var t,a=e.user,n=Object(o.c)((function(e){return e.blogs})),c=Object(o.b)(),l=function(){var e=Object(f.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c(j(t,n,a));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),u=function(){var e=Object(f.a)(d.a.mark((function e(t,a){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c(I(t,a,n));case 1:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),s=function(){var e=Object(f.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c(N(t,n));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",null,r.a.createElement("h3",null,"Blogs"),r.a.createElement(te,{addBlog:l}),r.a.createElement("div",{className:"blog-list"},(t=n,t.sort((function(e,t){return t.likes-e.likes}))).map((function(e){return r.a.createElement(ne,{user:a,blog:e,key:e.id,update:u,deleteBlog:s})}))))},ce=a(107),le=a(105),oe=a(64),ue=function(e){var t=e.user,a=e.handleLogOut;return r.a.createElement("div",null,r.a.createElement(ce.a,{collapseOnSelect:!0,expand:"md",bg:"primary",variant:"dark"},r.a.createElement(ce.a.Brand,null,r.a.createElement(u.c,{tag:u.b,to:"/",className:"nav-link",style:{color:"#fff"}},"Blog App")),r.a.createElement(ce.a.Toggle,{"aria-controls":"responsive-navbar-nav"}),r.a.createElement(ce.a.Collapse,{id:"responsive-navbar-nav"},r.a.createElement(le.a,{className:"mr-auto"},r.a.createElement(oe.a,null,r.a.createElement(u.c,{tag:u.b,to:"/",className:"nav-link",activeClassName:"active"},"Blogs")),r.a.createElement(oe.a,null,r.a.createElement(u.c,{tag:u.b,to:"/users",className:"nav-link",activeClassName:"active"},"Users"))),r.a.createElement(ce.a.Collapse,{className:"justify-content-end mr-sm-2"},r.a.createElement(ce.a.Text,null,"Signed in as: ",r.a.createElement("span",{style:{color:"#fff"}},t))),r.a.createElement(W.a,{inline:!0,className:"ml-sm-2"},r.a.createElement(F.a,{variant:"outline-light",onClick:a},"LogOut")))))},se=(a(96),a(103)),ie=a(58),me=a(65),pe=a.n(me),de=function(){var e=Object(o.c)((function(e){return e.blogs})),t=Object(D.f)().id,a=$("textarea"),n=e.find((function(e){return e.id===t})),c=Object(o.b)(),l=function(n){n.preventDefault(),c(function(e,t,a){return function(){var n=Object(f.a)(d.a.mark((function n(r){var c,l;return d.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,O.updateComments(e,t);case 3:c=n.sent,l=a.map((function(e){return e.id===c.id&&(e.comments=c.comments),e})),r({type:"UPDATE-COMMENT",data:l}),n.next=13;break;case 8:n.prev=8,n.t0=n.catch(0),r(k({message:n.t0.response.data.error,messageType:"danger"})),setTimeout((function(){r(k())}),5e3),console.log("Failed to get the comments");case 13:case"end":return n.stop()}}),n,null,[[0,8]])})));return function(e){return n.apply(this,arguments)}}()}(t,a.value,e)),a.onReset()};return n?r.a.createElement("div",null,r.a.createElement("div",{className:"container"},r.a.createElement(se.a,{src:pe.a,fluid:!0,style:{maxWidth:"100%",maxHeight:"300px !important",width:"100%"}})),r.a.createElement("h2",null,n.title),r.a.createElement("p",null,r.a.createElement("a",{href:n.url,target:"blank"},n.url)),r.a.createElement("p",null,n.likes," likes",r.a.createElement(F.a,{className:"ml-2",variant:"primary",onClick:function(){var t=n.id,a=n.likes+1;console.log(a),c(I(t,{likes:a},e))}},"like")),r.a.createElement("p",null,"added by ",n.author),r.a.createElement("hr",null),r.a.createElement("div",{className:"container"},r.a.createElement("h3",null,n.comments.length," comments"),r.a.createElement(W.a,{onSubmit:function(e){return l(e)}},r.a.createElement(W.a.Row,null,r.a.createElement(W.a.Group,{as:ie.a,md:"6",controlId:"validationCustom03"},r.a.createElement(W.a.Control,Object.assign({},a,{placeholder:"Add comment ...",required:!0})),r.a.createElement(W.a.Control.Feedback,{type:"invalid"},"Please provide a valid city.")),r.a.createElement(ie.a,{md:"4"},r.a.createElement(F.a,{type:"submit"},"Add Comment")))),r.a.createElement(P.a,{style:{width:"100%"}},n.comments.map((function(e){return r.a.createElement(P.a,{key:e.date,className:"mb-2 mt-2"},r.a.createElement(P.a.Text,null,e.text),r.a.createElement(P.a.Subtitle,{className:"mb-2 ml-auto mr-4 text-muted"},function(e){var t=Math.floor((new Date).getTime()/1e3-e/1e3),a=Math.floor(t/31536e3);return a>1?a+"years ago ":(a=Math.floor(t/2592e3))>1?a+"mpnths ago":(a=Math.floor(t/86400))>=1?a+"days ago":(a=Math.floor(t/3600))>=1?a+"hrs ago":(a=Math.floor(t/60))>1?a+"minutes ago ":Math.floor(t)+"secs ago"}(e.date)," ago"))}))))):r.a.createElement("div",{style:{display:"flex",justifyContent:"center",alignItems:"center"}}," ",r.a.createElement(_.a,{animation:"border",role:"status"},r.a.createElement("span",{className:"sr-only"},"Loading...")))},fe=function(){var e=Object(o.c)((function(e){return e.user})),t=Object(o.c)((function(e){return e.notification})),a=t.message,c=t.messageType,l=function(){var e=Object(f.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:u((function(e){window.localStorage.removeItem("loggedInBlogAppUser"),O.setToken(null),e({type:"LOGOUT"})}));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),u=Object(o.b)();return Object(n.useEffect)((function(){u(function(e){return function(){var t=Object(f.a)(d.a.mark((function t(a){var n;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,O.getAll();case 2:n=t.sent,a(e?{type:"INITIAL",data:n}:{type:"UNLOGGEDIN",data:[]});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(e)),u(function(){var e=Object(f.a)(d.a.mark((function e(t){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,B.getAll();case 2:a=e.sent,t({type:"GET_USERS",data:a});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[]),Object(n.useEffect)((function(){u(function(){var e=window.localStorage.getItem("loggedInBlogAppUser");return e?function(t){var a=JSON.parse(e);O.setToken(a.token),t({type:"LOGGEDIN",data:a})}:function(e){e({type:"INIT"})}}())}),[]),null===e?r.a.createElement(J,null):r.a.createElement("div",null,r.a.createElement(ue,{user:e.name,handleLogOut:l}),r.a.createElement("div",{className:"container"},r.a.createElement(R.a,{variant:c}," ",a),r.a.createElement(D.c,null,r.a.createElement(D.a,{path:"/users/:id"},r.a.createElement(Q,null)),r.a.createElement(D.a,{path:"/users"},r.a.createElement(q,null)),r.a.createElement(D.a,{path:"/blogs/:id"},r.a.createElement(de,null)),r.a.createElement(D.a,{path:"/"},r.a.createElement(re,{user:e})))))};l.a.render(r.a.createElement(o.a,{store:M},r.a.createElement(u.a,null,r.a.createElement(fe,null))),document.getElementById("root"))}},[[67,1,2]]]);
//# sourceMappingURL=main.74dc5bfa.chunk.js.map